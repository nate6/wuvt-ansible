<?xml version="1.0"?>
<ices>
    <!-- run in background -->
    <background>1</background>
    <!-- where logs, etc go. -->
    <logpath>/var/log/ices</logpath>
    <logfile>ices.log</logfile>
    <!-- 1=error,2=warn,3=info,4=debug -->
    <loglevel>4</loglevel>
    <!-- set this to 1 to log to the console instead of to the file above -->
    <consolelog>0</consolelog>

    <!-- optional filename to write process id to -->
    <pidfile>/etc/ices/ices.pid</pidfile>

    <stream>

	
        <!-- input module

            The module used here is the playlist module - it has 
            'submodules' for different types of playlist. There are
            two currently implemented, 'basic', which is a simple
            file-based playlist, and 'script' which invokes a command
            to returns a filename to start playing. -->

	<input>
		<module>alsa</module>
    		<param name="rate">44100</param>
		<param name="channels">2</param>
		<param name="device">hw:1,0</param>
		<param name="periods">2</param>
		<param name="buffer-time">500</param>
		<param name="metadata">1</param>
		<param name="metadatafilename">/etc/ices/metadata.txt</param>
		
	</input>

		<!-- Stream instance
            You may have one or more instances here. This allows you to 
            send the same input data to one or more servers (or to different
            mountpoints on the same server). Each of them can have different
            parameters. This is primarily useful for a) relaying to multiple
            independent servers, and b) encoding/reencoding to multiple
            bitrates.
            If one instance fails (for example, the associated server goes
            down, etc), the others will continue to function correctly.
            This example defines two instances as two mountpoints on the
            same server.  -->
        <instance>
            <hostname>localhost</hostname>
            <port>8000</port>
            <password>{{ icecast_pw }}</password>
            <mount>/wuvt-lb.ogg</mount>
            <reconnectdelay>2</reconnectdelay>
            <reconnectattempts>5</reconnectattempts> 
	    <maxqueuelength>80</maxqueuelength>
	    
	    <downmix>1</downmix>
	    <resample>
		    <in-rate>44100</in-rate>
		    <out-rate>22050</out-rate>
            </resample>
            <encode>  
                <nominal-bitrate>32000</nominal-bitrate>
                <samplerate>22050</samplerate>
		<channels>2</channels>
		<quality>0</quality>
            </encode>

	    <metadata>
		   <name>WUVT-FM 90.7 Blacksburg, VA  [Live Stream]</name>
		   <genre>College radio</genre>
		   <description>The greatest radio station in the world</description>
	    </metadata>
        </instance>


        <instance>
            <hostname>localhost</hostname>
            <port>8000</port>
            <password>{{ icecast_pw }}</password>
            <mount>/wuvt.ogg</mount>
            <reconnectdelay>2</reconnectdelay>
            <reconnectattempts>5</reconnectattempts> 
	    <maxqueuelength>80</maxqueuelength>
	    <downmix>0</downmix>
            <encode>  
                <nominal-bitrate>64000</nominal-bitrate>
                <samplerate>44100</samplerate>
		<channels>2</channels>
		<quality>3</quality>
            </encode>

	    <metadata>
		   <name>WUVT-FM 90.7 Blacksburg, VA  [Live Stream]</name>
		   <genre>College radio</genre>
		   <description>The greatest radio station in the world</description>
	    </metadata>
        </instance>


     <!-- <instance>
            <hostname>localhost</hostname>
            <port>8000</port>
            <password>{{ icecast_pw }}</password>
            <mount>/wuvt-hq.ogg</mount>
            <reconnectdelay>2</reconnectdelay>
            <reconnectattempts>5</reconnectattempts> 
            <maxqueuelength>80</maxqueuelength>
	    <downmix>0</downmix>
            <encode>  
                <nominal-bitrate>320000</nominal-bitrate>
                <samplerate>44100</samplerate>
                <channels>2</channels>
            </encode>

	    <metadata>
		   <name>WUVT-FM 90.7 Blacksburg, VA  [Live Stream]</name>
		   <genre>College radio</genre>
		   <description>The greatest radio station in the world</description>
	    </metadata>
								
	    
        </instance> -->


<!--
	<instance>
		<hostname>localhost</hostname>
		<port>8000</port>
		<password>{{ icecast_pw }}</password>
		<mount>/wuvt-du.ogg</mount>
		<reconnectdelay>2</reconnectdelay>
		<reconnectattempts>5</reconnectattempts>
		<maxqueuelength>80</maxqueuelength>
		<downmix>1</downmix>
		<resample>
			<in-rate>44100</in-rate>
			<out-rate>11025</out-rate>
		</resample>
		<encode>
			<nominal-bitrate>16000</nominal-bitrate>
			<samplerate>11025</samplerate>
			<channels>1</channels>
			<quality>0</quality>
		</encode>

	    <metadata>
		   <name>WUVT-FM 90.7 Blacksburg, VA  [Live Stream]</name>
		   <genre>College radio</genre>
		   <description>WUVT-FM 90.7 FM - Blacksburg, VA</description>
	    </metadata>
	</instance> -->

	</stream>
</ices>
